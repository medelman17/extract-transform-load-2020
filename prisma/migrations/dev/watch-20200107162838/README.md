# Migration `watch-20200107162838`

This migration has been generated by Michael Edelman at 1/7/2020, 4:28:38 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Character" (
  "createdAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "id" text  NOT NULL  ,
  "name" text  NOT NULL DEFAULT '' ,
  "unicode" text  NOT NULL DEFAULT '' ,
  "unicode_int" integer  NOT NULL DEFAULT 0 ,
  "updatedAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."CharacterBlock" (
  "createdAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "end" integer  NOT NULL DEFAULT 0 ,
  "id" text  NOT NULL  ,
  "name" text  NOT NULL DEFAULT '' ,
  "start" integer  NOT NULL DEFAULT 0 ,
  "updatedAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

ALTER TABLE "public"."Character" ADD COLUMN "block" text    REFERENCES "public"."CharacterBlock"("id") ON DELETE SET NULL;

CREATE UNIQUE INDEX "Character.unicode" ON "public"."Character"("unicode")

CREATE UNIQUE INDEX "Character.unicode_int" ON "public"."Character"("unicode_int")

CREATE UNIQUE INDEX "CharacterBlock.name" ON "public"."CharacterBlock"("name")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..watch-20200107162838
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,28 @@
+datasource db {
+    provider = "postgresql"
+    url      = "postgresql://fabulas:fabulas@0.0.0.0:5432/postgres?schema=public"
+}
+
+generator photon {
+    provider = "photonjs"
+}
+
+model Character {
+    id          String          @id @default(uuid())
+    createdAt   DateTime        @default(now())
+    updatedAt   DateTime        @updatedAt
+    name        String
+    unicode     String          @unique
+    unicode_int Int             @unique
+    block       CharacterBlock?
+}
+
+model CharacterBlock {
+    id         String      @id @default(uuid())
+    createdAt  DateTime    @default(now())
+    updatedAt  DateTime    @updatedAt
+    name       String      @unique
+    start      Int
+    end        Int
+    characters Character[]
+}
```


